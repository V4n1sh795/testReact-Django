services:
  react:
    build:
      context: ./react
      dockerfile: DockerfileReact
    image: react_image:latest
    container_name: react
    restart: unless-stopped
    ports:
      - '5173:8080'
    command: >
      sh -c "npm run dev -- --host 0.0.0.0"
  django:
    build:
      context: ./src
      dockerfile: DockerfileDjango
    image: django_image:latest
    container_name: django_containerv2
    restart: unless-stopped
    ports:
      - '5000:8000'
    command: >
      sh -c "python manage.py migrate && \
             python manage.py runserver 0.0.0.0:5000"
volumes:
  static_volume:
  media_volume: